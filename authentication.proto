syntax = "proto3";

// package user;
option go_package = "telepathy-server/proto";

import "error.proto";

service AuthService {
    rpc CreateAuthCode (CreateAuthCodeRequest) returns (CreateAuthCodeResponse){}
    rpc ValidateAuthCode (ValidateAuthCodeRequest) returns (ValidateAuthCodeResponse){}
    rpc SignUp (SignUpRequest) returns (SignUpResponse){}
    rpc LoginWithCode (LoginWithCodeRequest) returns (LoginResponse){}
    rpc LoginWithPassword (LoginWithPasswordRequest) returns (LoginResponse){}
}

message User {
    string uid = 1;
    string name = 2;
    bool gender = 3; // false is male / true is female 
    string birth = 4; // 20030407
    string phoneNumber = 6; // 010-4194-8536
    int64 createdAt = 7; // UnixTime -> change to localtime (ex. kst)
    int64 updatedAt = 8; // UnixTime
}

message AuthUser {
    string uid = 1;
    PhoneNumber phone = 2;
    string password = 3;
    int64 createdAt = 4; // UnixTime -> change to localtime (ex. kst)
    int64 phoneNumberUpdatedAt = 5; // UnixTime
    int64 passwordUpdatedAt = 6;
}

message PhoneNumber {
    string num = 1; // 전화번호
    string country = 2; // 국가 번호 ex) 82
}

message Term {
    string uid = 1;
    bool agree = 2;
    int64 createdAt = 3; // UnixTime -> change to localtime (ex. kst)
    int64 updatedAt = 4; // UnixTime
}

message CreateAuthCodeRequest {
    PhoneNumber phone = 1;
}

message CreateAuthCodeResponse {
    Status status = 1;
}

message ValidateAuthCodeRequest {
    PhoneNumber phone = 1;
    string code = 2;
}

message ValidateAuthCodeResponse {
    Status status = 1;
}

message SignUpRequest {
    User user = 1;
    PhoneNumber phone = 2;
    string password = 3;
}

message SignUpResponse {
    Status status = 1;
}

message LoginWithCodeRequest {
    PhoneNumber phone = 1;
    string code = 2;
}

message LoginWithPasswordRequest {
    PhoneNumber phone = 1;
    string password = 2;
}

message LoginResponse {
    Status status = 1;
}