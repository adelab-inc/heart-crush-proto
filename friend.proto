syntax = "proto3";

option go_package = "telepathy-server/proto";

import "common.proto";

service FriendService {
  // 주기적으로(앱을 처음 키는 시점 정도로) 추천친구를 가져오는 서비스
  rpc GetRecommendFriendsUID(GetRecommendFriendsUIDRequest)
      returns (GetRecommendFriendsUIDResponse) {}
  // 제공된 추천친구 uid들을 기반으로 친구정보를 가져오는 서비스
  rpc GetRecommendFriends(GetRecommendFriendsRequest)
      returns (GetRecommendFriendsResponse) {}
  rpc GetBlockedFriends(GetBlockedFriendsRequest)
      returns (GetBlockedFriendsResponse) {}
  rpc CreateBlockedFriend(CreateBlockedFriendRequest)
      returns (CreateBlockedFriendResponse) {}
  rpc DeleteBlockedFriend(DeleteBlockedFriendRequest)
      returns (DeleteBlockedFriendResponse) {}
  rpc GetFriends(GetFriendsRequest) returns (GetFriendsResponse) {}
  rpc GetBestFriends(GetBestFriendsRequest) returns (GetBestFriendsResponse) {}
  rpc UpdateBestFriends(UpdateBestFriendsRequest)
      returns (UpdateBestFriendsResponse) {}
  rpc DeleteBestFriend(DeleteBestFriendRequest)
      returns (DeleteBestFriendResponse) {}
  rpc CreateBestFriend(CreateBestFriendRequest)
      returns (CreateBestFriendResponse) {}
  rpc GetWhoCrushMe(GetWhoCrushMeRequest) returns (GetWhoCrushMeResponse) {}
  rpc GetPhoneBookFriend(GetPhoneBookFriendRequest)
      returns (GetPhoneBookFriendResponse) {}
}

message BestFriendRequest {
  string uid = 1;
  bool alarm = 2;
}

message GetRecommendFriendsUIDRequest {repeated string phone_book_friends = 1;}

message GetRecommendFriendsUIDResponse {
  bool success = 1;
  repeated string recommended_friends_uid = 2;
  optional string error = 3;
}

message GetRecommendFriendsRequest {
  repeated string recommended_friends_uid = 1;
}

message GetRecommendFriendsResponse {
  bool success = 1;
  repeated User recommended_friends = 2;
  optional string error = 3;
}

message GetBlockedFriendsRequest {}

message GetBlockedFriendsResponse {
  bool success = 1;
  repeated User blocked_friends = 2;
  optional string error = 3;
}

message CreateBlockedFriendRequest {string friend_id = 1;}

message CreateBlockedFriendResponse {
  bool success = 1;
  optional string error = 2;
}

message DeleteBlockedFriendRequest {string friend_id = 2;}

message DeleteBlockedFriendResponse {
  bool success = 1;
  optional string error = 2;
}

message GetFriendsRequest {}

message GetFriendsResponse {
  bool success = 1;
  repeated User friends = 2;
  optional string error = 3;
}

message GetBestFriendsRequest {}

message GetBestFriendsResponse {
  bool success = 1;
  repeated User best_friends = 2;
  optional string error = 3;
}

message UpdateBestFriendsRequest {repeated BestFriendRequest best_friends = 2;}

message UpdateBestFriendsResponse {
  bool success = 1;
  optional string error = 2;
}

message CreateCrushRequest {
  string friend_id = 2;
  string display_name = 3;
  string reason = 4;
}

message CreateCrushResponse {
  bool success = 1;
  optional string error = 2;
}

message GetWhoCrushMeRequest {}

message GetWhoCrushMeResponse {
  bool success = 1;
  repeated User users = 2;
  optional string error = 3;
}

message CreateBestFriendRequest {string friend_id = 1;}

message CreateBestFriendResponse {
  bool success = 1;
  optional string error = 2;
}

message DeleteBestFriendRequest {string friend_id = 1;}

message DeleteBestFriendResponse {
  bool success = 1;
  optional string error = 2;
}

message GetPhoneBookFriendRequest {
  string phone_number_hash = 1;
}

message GetPhoneBookFriendResponse {
  bool success = 1;
  User user = 2;
  optional string error = 3;
}
