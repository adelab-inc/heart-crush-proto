syntax = "proto3";

option go_package = "telepathy-server/proto";

import "google/protobuf/timestamp.proto";

// Profile image size
// width: 1600, height: 1600,
// thumb size
// width: 360, height: 360,

enum EChipType {
  ECT_UNSPECIFIED = 0;
  ECT_OTHER = 1;
  ECT_SCHOOL_SHORT_NAME = 2;
  ECT_GRADE = 3;
  ECT_INSTA_ACCOUNT = 4;
  ECT_TIKTOK_ACCOUNT = 5;
  ECT_MBTI = 6;
}

enum EGender {
  EG_UNSPECIFIED = 0;
  EG_MALE = 1;
  EG_FEMALE = 2;
}

message ChipItem {
  EChipType type = 1;
  string text = 2;
  optional string image_url = 3;
}
message Config {
  optional bool heart_lock = 1;
  optional bool system_alarm = 2;
  optional bool question_alarm = 3;
  optional bool bluetooth_alarm = 4;
  optional bool heart_alarm = 5;
}

enum EUserType {
  EUT_UNSPECIFIED = 0;
  EUT_USER = 1; // 일반 유저
  EUT_ANONYMOUS = 2; // 익명 유저
  EUT_CRUSH = 3; // 짝사랑 익명 유저
  EUT_UNREGISTERED = 4; // 등록되지 않은 유저
}

message User {
  string uid = 1;
  string name = 2;
  string description = 3;
  EGender gender = 4;
  repeated ChipItem chips = 5;
  optional string birth = 6;       // only EUT_USER // only me, 20030407
  optional string phone_number = 7; // only EUT_USER // only me, E.164
  optional string phone_number_hash = 8;
  optional string email = 9;       // only EUT_USER // only me
  optional Config config = 10;      // only EUT_USER // only me
  string profile_img_url = 11;
  string thumbnail_img_url = 12;
  optional int32 best_friends = 13;                   // only EUT_USER // only me
  optional bool is_initialized = 14;                  // only EUT_USER // only me
  optional google.protobuf.Timestamp created_at = 15; // only EUT_USER, EUT_ANONYMOUS, EUT_CRUSH // only me
  optional google.protobuf.Timestamp updated_at = 16; // only EUT_USER, EUT_ANONYMOUS, EUT_CRUSH // only me, UnixTime
  optional string school_code = 17;                   // only EUT_USER // only me
  string school_name = 18;                            // only EUT_USER
  string school_grade = 19;                           // only EUT_USER
  EUserType user_type = 20;
  optional string referenced_uid = 21;                  // only EUT_ANONYMOUS // only me
  optional string target_uid = 22;                      // only EUT_CRUSH
  optional google.protobuf.Timestamp crush_ended_at = 23; // only EUT_CRUSH
  optional string phone_hash = 24; // only EUT_USER // only searchUser's phone_hashes
}
